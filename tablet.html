<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Versione Tablet</title>
    <style>
        body { font-family: sans-serif; background: #121212; color: white; padding: 10px; }
        .song-item { 
            background: #1e1e1e; margin-bottom: 10px; padding: 15px; 
            border-radius: 8px; border-left: 5px solid #00d4ff;
        }
        .song-name { font-weight: bold; display: block; margin-bottom: 10px; font-size: 1.1rem; }
        .actions { display: flex; gap: 10px; }
        .btn { 
            flex: 1; padding: 12px; text-align: center; border-radius: 5px; 
            text-decoration: none; font-weight: bold; font-size: 0.9rem;
        }
        .btn-pdf { background: #ff4444; color: white; }
        .btn-audio { background: #00d4ff; color: black; cursor: pointer; border: none; }
        #player-fixed { 
            position: fixed; bottom: 0; left: 0; width: 100%; 
            background: #000; padding: 10px; border-top: 2px solid #00d4ff;
        }
        audio { width: 95%; }
        .back { color: #888; text-decoration: none; display: block; margin-bottom: 20px; }
    </style>
</head>
<body>

    <a href="index.html" class="back">‚Üê Torna alla versione PC</a>
    <h2>STUDIO TABLET</h2>
    <p style="font-size: 0.8rem; color: #888;">Tocca PDF per aprire lo spartito, PLAY per l'audio.</p>

    <div id="playlist"></div>

    <div style="height: 100px;"></div> <div id="player-fixed">
        <audio id="audio" controls></audio>
        <div id="current-song" style="font-size: 0.7rem; text-align: center; margin-top: 5px;"></div>
    </div>

    <script>
        const UTENTE = "BiagettiLuigino";
        const REPO = "mio-archivio-musicale";

        async function init() {
            const response = await fetch(`https://api.github.com/repos/${UTENTE}/${REPO}/contents/`);
            const files = await response.json();
            const container = document.getElementById('playlist');

            files.filter(f => f.name.toLowerCase().endsWith('.mp3')).forEach(file => {
                const baseName = file.name.replace(".mp3", "");
                const div = document.createElement('div');
                div.className = 'song-item';
                div.innerHTML = `
                    <span class="song-name">${baseName.replace(/_/g, " ")}</span>
                    <div class="actions">
                        <a href="${encodeURI(baseName + '.pdf')}" target="_blank" class="btn btn-pdf">VEDI PDF</a>
                        <button onclick="playAudio('${encodeURI(file.name)}', '${baseName}')" class="btn btn-audio">SUONA AUDIO</button>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function playAudio(url, name) {
            const a = document.getElementById('audio');
            a.src = url;
            a.play();
            document.getElementById('current-song').innerText = "In riproduzione: " + name;
        }

        window.onload = init;
    </script>
</body>
</html>
